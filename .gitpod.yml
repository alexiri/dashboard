# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)

additionalRepositories:
  - url: https://github.com/esphome/esphome
    # checkoutLocation is relative to /workspace
    checkoutLocation: esphome

tasks:
  - name: dashboard
    init: |
      npm install --legacy-peer-deps
      script/develop

  - name: esphome
    before: cd /workspace/esphome
    init: |
      pyenv install 3.9.0
      pyenv local 3.9.0
      script/setup
    command: ESPHOME_DASHBOARD_DEV=/workspace/dashboard esphome dashboard ./

ports:
  - port: 6052
    onOpen: open-preview
